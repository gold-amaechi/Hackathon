{% extends 'todo/base.html' %}
{% block title %}Home {% endblock %}

{% block content %}

  <h2>Task List</h2>
<!--
<ul>
    {% for task in tasks %}
      <li>
        {{ task.title }} - {{ task.get_priority_display }}
        <a href="{% url 'todo:task-detail' task.id %}">View</a>
        <a href="{% url 'todo:task-update' task.id %}">Edit</a>
        <a href="{% url 'todo:task-delete' task.id %}">Delete</a>
      </li>
    {% endfor %}
  </ul>
  
-->
<table class="table table-dark" id="taskTable">
    <thead>
      <tr>
        <th scope="col">Task Name</th>
        <th scope="col">Task Description</th>
        <th scope="col">Task Deadline</th>
        <th scope="col">Task Priority Level</th>
        <th scope="col">Completed?</th>
      </tr>
    </thead>
      {% for task in tasks %}
      <tr>
        <td>{{ task.title }}</td>
        <td>{{ task.description }}</td>
        <td> {{ task.date }}</td>
        <td>{{task.priority}}</td>
        <td><input type="checkbox" value="check"></td>
        <td><a href="{% url 'todo:task-detail' task.id %}">View</a></td>
        <td><a href="{% url 'todo:task-update' task.id %}">Edit</a></td>
        <td><a href="{% url 'todo:task-delete' task.id %}">Delete</a></td>
      </tr>
      {% endfor %}
    
</div>
  
{% endblock %}

<script>
  const table = document.getElementById("taskTable");
        const checkboxes = document.querySelectorAll(".move-checkbox");

        // Add click event listeners to checkboxes
        checkboxes.forEach(checkbox => {
            checkbox.addEventListener("change", () => {
                if (checkbox.checked) {
                    // Get the row that contains the checked checkbox
                    const row = checkbox.closest("tr");
                    // Move the row to the bottom of the table
                    table.appendChild(row);
                }
            });
        });
</script>